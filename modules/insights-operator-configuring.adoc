// Module included in the following assemblies:
//
// * support/remote_health_monitoring/using-insights-operator.adoc


:_mod-docs-content-type: PROCEDURE
[id="insights-operator-configuring_{context}"]
= Configuring Insights Operator

You can configure Insights Operator to meet the needs of your organization. The Insights Operator is configured using a combination of the default configurations in the `pod.yaml` file in the Insights Operator `Config` directory and the configurations stored in the `support` secret in the `openshift-config` namespace. The `support` secret does not exist by default and must be created when adding custom configurations for the first time. Configurations in the `support` secret override the defaults set in the `pod.yaml` file.

The table below describes the available configuration attributes:

.Insights Operator configurable attributes
[options="header"]
[cols=".^2l,.^3a,.^1a,.^1a",options="header"]
|====
|Attribute name|Description|Value type|Default value

|enableGlobalObfuscation
|Enables the global obfuscation of IP addresses and the cluster domain name.
|Boolean
|`false`

|endpoint
|Sets the upload endpoint.
|URL
|https://console.redhat.com/api/ingress/v1/upload

|clusterTransferEndpoint
|The endpoint for checking and downloading cluster transfer data.
|URL
|https://api.openshift.com/api/accounts_mgmt/v1/cluster_transfers/

|clusterTransferInterval
|Sets the frequency for checking available cluster transfers.
|Time interval
|`24h`

|conditionalGathererEndpoint
|Sets the endpoint for providing conditional gathering rule definitions.
|URL
|https://console.redhat.com/api/gathering/gathering_rules

|httpProxy, 
 httpsProxy, 
 noProxy
|Set custom proxy for Insights Operator.
|URL
|No default

|interval 
|Sets the data gathering and upload frequency.
|Time interval
|`2h`

|reportEndpoint 
|Specifies the endpoint for downloading the latest Insights analysis. For the specified default value, ensure that you replace `<cluster_id>` with the unique identified, cluster ID, of your cluster.
|URL
|https://console.redhat.com/api/insights-results-aggregator/v2/cluster/<cluster_id>/reports

|reportPullingDelay
|Sets the delay between data upload and data download.
|Time interval
|`60s`

|reportPullingTimeout 
|Sets the timeout value for the Insights download request.
|Time interval
|`30s`

|reportMinRetryTime 
|Sets the time for when to retry a request.
|Time interval
|`30s`

|scaEndpoint 
|Specifies the endpoint for downloading the simple content access (SCA) entitlements.
|URL
|https://api.openshift.com/api/accounts_mgmt/v1/entitlement_certificates

|scaInterval
|Specifies the frequency of the simple content access entitlements download.
|Time interval
|`8h`

|scaPullDisabled
|Disables the simple content access entitlements download.
|Boolean
|`false`
|====

:_mod-docs-content-type: PROCEDURE
[id="creating-insights-config-configmap_{context}"]
== Creating the insights-config ConfigMap object

This procedure describes how to create the *insights-config* `ConfigMap` object for the Insights Operator to set custom configurations.

[IMPORTANT]
====
Red Hat recommends you consult Red Hat Support before making changes to the default Insights Operator configuration.
====

.Prerequisites

* You are logged in to the {product-title} web console as a user with `cluster-admin` role.

.Procedure

. Navigate to *Workloads* -> *Secrets*.
. On the *Secrets* page, select *All Projects* from the *Project* list, and then set *Show default projects* to on.
. Select the *openshift-config* project from the *Project* list.
. Search for the *support* secret using the *Search by name* field. If it does not exist, click *Create* -> *Key/value secret* to create it.
. Click the *Options* menu {kebab} for the secret, and then click *Edit Secret*.
. Click *Add Key/Value*.
. Enter an attribute name with an appropriate value (see table above), and click *Save*.
. Repeat the above steps for any additional configurations.
